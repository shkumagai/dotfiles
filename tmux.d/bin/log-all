#!/bin/bash

PWD=$(cd $(dirname $0); pwd)
TMUX_ROOT=$(cd $PWD/..; pwd)

WINDOW_NAME=$(basename $0)

source ${TMUX_ROOT}/bin/utils

function main ()
{
    get-passwds
    cols=$(get-cols-per-host 3)

    tmux neww -n ${WINDOW_NAME}

    tmux selectp -t 0; tmux splitw -h -t ${WINDOW_NAME}.0; tmux resizep -t ${WINDOW_NAME}.0 -x ${cols}
    tmux selectp -t 1; tmux splitw -h -t ${WINDOW_NAME}.1; tmux resizep -t ${WINDOW_NAME}.1 -x ${cols}

    tmux display-panes

    tmux send -t ${WINDOW_NAME}.0  "$TMUX_ROOT/bin/automate.sh xsync-log-01 'pwd'" C-m
    tmux send -t ${WINDOW_NAME}.1  "$TMUX_ROOT/bin/automate.sh xsync-log-03 'pwd'" C-m
    tmux send -t ${WINDOW_NAME}.2  "$TMUX_ROOT/bin/automate.sh xsync-log-04 'pwd'" C-m
}

# run
main "$@"
