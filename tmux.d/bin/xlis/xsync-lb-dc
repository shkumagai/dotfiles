#!/bin/bash

WINDOW_NAME=$(basename $0)

source ./base
source ${TMUX_ROOT}/bin/utils

function main
{
    get-passwds
    #rows=$(get-row-per-host 7)
    rows=7

    tmux neww -n ${WINDOW_NAME}

    tmux selectp -t 0;  tmux splitw -v -t ${WINDOW_NAME}.0;  tmux resizep -t ${WINDOW_NAME}.0 -y ${rows}
    tmux selectp -t 1;  tmux splitw -v -t ${WINDOW_NAME}.1;  tmux resizep -t ${WINDOW_NAME}.1 -y ${rows}
    tmux selectp -t 2;  tmux splitw -v -t ${WINDOW_NAME}.2;  tmux resizep -t ${WINDOW_NAME}.2 -y ${rows}
    tmux selectp -t 3;  tmux splitw -v -t ${WINDOW_NAME}.3;  tmux resizep -t ${WINDOW_NAME}.3 -y ${rows}
    tmux selectp -t 4;  tmux splitw -v -t ${WINDOW_NAME}.4;  tmux resizep -t ${WINDOW_NAME}.4 -y ${rows}
    tmux selectp -t 5;  tmux splitw -v -t ${WINDOW_NAME}.5;  tmux resizep -t ${WINDOW_NAME}.5 -y ${rows}

    tmux send -t ${WINDOW_NAME}.0  "$TMUX_ROOT/bin/auto_ssh.sh pointer/203.138.206.50 'dstat -tamsl'" C-m
    tmux send -t ${WINDOW_NAME}.1  "$TMUX_ROOT/bin/auto_ssh.sh pointer/203.138.206.51 'dstat -tamsl'" C-m
    tmux send -t ${WINDOW_NAME}.2  "$TMUX_ROOT/bin/auto_ssh.sh pointer/203.138.206.52 'dstat -tamsl'" C-m
    tmux send -t ${WINDOW_NAME}.3  "$TMUX_ROOT/bin/auto_ssh.sh pointer/203.138.206.53 'dstat -tamsl'" C-m
    tmux send -t ${WINDOW_NAME}.4  "$TMUX_ROOT/bin/auto_ssh.sh pointer/203.138.206.54 'dstat -tamsl'" C-m
    tmux send -t ${WINDOW_NAME}.5  "$TMUX_ROOT/bin/auto_ssh.sh pointer/203.138.206.55 'dstat -tamsl'" C-m
    tmux send -t ${WINDOW_NAME}.6  "$TMUX_ROOT/bin/auto_ssh.sh pointer/203.138.206.56 'dstat -tamsl'" C-m
}

# run
main "$@"
