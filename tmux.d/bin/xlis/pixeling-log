#!/bin/bash

WINDOW_NAME=$(basename $0)

source ./base
source ${TMUX_ROOT}/bin/utils

function main
{
    get-passwds

    tmux neww -n ${WINDOW_NAME}
    tmux splitw -h -t ${WINDOW_NAME}

    tmux selectp -t 0;  tmux splitw -v -t ${WINDOW_NAME}.0
    tmux selectp -t 2;  tmux splitw -v -t ${WINDOW_NAME}.2

    tmux send -t ${WINDOW_NAME}.0  "$TMUX_ROOT/bin/auto_ssh.sh dwh-master-01/dwh-engine-03 'tail -F /var/log/supervisor/scale_out_pixeling_server/*.log'" C-m
    tmux send -t ${WINDOW_NAME}.1  "$TMUX_ROOT/bin/auto_ssh.sh dwh-master-01/dwh-engine-03 'tail -F /var/log/supervisor/sonet_media_pixeling_server/*.log'" C-m
    tmux send -t ${WINDOW_NAME}.2  "$TMUX_ROOT/bin/auto_ssh.sh dwh-master-01/dwh-engine-03 'tail -F /var/log/supervisor/cyber_agent/*.log'" C-m
    tmux send -t ${WINDOW_NAME}.3  "$TMUX_ROOT/bin/auto_ssh.sh dwh-master-01/dwh-engine-03 'tail -F /var/log/supervisor/freebit/*.log'" C-m
}

# run
main "$@"
