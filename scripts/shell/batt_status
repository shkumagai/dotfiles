#!/usr/bin/env bash

icon_status_charged='ğŸ”Œ'
icon_status_charging='ğŸ”Œ'
icon_status_discharging='ğŸ”‹'
icon_status_attached='ğŸ˜•'
icon_status_unknown='ğŸ§'

battery_status () {
  pmset -g batt | awk -F'; *' 'NR==2{ print $2 }'
}

print_icon_status () {
  status=$1
  if [[ $status =~ (charged) || $status =~ (full) ]]; then
    printf "$icon_status_charged"
  elif [[ $status =~ (^charging) || $status =~ (finishing charge) ]]; then
    printf "$icon_status_charging"
  elif [[ $status =~ (^discharging) ]]; then
    printf "$icon_status_discharging"
  elif [[ $status =~ (attached) ]]; then
    printf "$icon_status_attached"
  else
    printf "$icon_status_unknown"
  fi
}

main () {
  local status=$(battery_status)
  print_icon_status "$status"
}

main
